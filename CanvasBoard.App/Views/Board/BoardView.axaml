<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="CanvasBoard.App.Views.Board.BoardView">
  <Grid>
    <Grid RowDefinitions="Auto,*">
      <!-- Top bar -->
      <Border Background="#222222" Height="40">
        <DockPanel Margin="8,0">
          <TextBlock Text="CanvasBoard"
                    DockPanel.Dock="Left"
                    VerticalAlignment="Center"
                    Foreground="White"
                    FontWeight="Bold" />

          <StackPanel DockPanel.Dock="Right"
                      Orientation="Horizontal"
                      VerticalAlignment="Center"
                      Spacing="6">
            <CheckBox x:Name="SnapCheckBox"
                      Content="Snap"
                      VerticalAlignment="Center" />
            <TextBlock Text="Grid:"
                      VerticalAlignment="Center" />
            <TextBox x:Name="SnapSizeBox"
                    Width="60"
                    Text="50"
                    VerticalContentAlignment="Center" />
          </StackPanel>
        </DockPanel>
      </Border>
      <!-- Main board area -->
      <Border Grid.Row="1"
              Background="#181818"
              ClipToBounds="True">
        <!-- Viewport: receives mouse events (no transform here) -->
        <Grid x:Name="BoardHost"
              Focusable="True"
              Background="#01000000"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch">

          <!-- Inner content that actually gets transformed -->
          <Grid x:Name="Viewport"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                RenderTransformOrigin="0,0">
            <Grid.RenderTransform>
              <!-- Single matrix we control in code -->
              <MatrixTransform />
            </Grid.RenderTransform>

            <!-- LAYER 1: images -->
            <Canvas x:Name="ImageLayer"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">

              <!-- DEBUG: red cross at world origin (0,0) -->
              <Rectangle Width="10" Height="2"
                         Canvas.Left="-5" Canvas.Top="-1"
                         Fill="Red" />
              <Rectangle Width="2" Height="10"
                         Canvas.Left="-1" Canvas.Top="-5"
                         Fill="Red" />

            </Canvas>

            <!-- LAYER 2: notes (markdown boxes) -->
            <Canvas x:Name="NoteLayer"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch" />

          </Grid>
        </Grid>
      </Border>
    </Grid>
  </Grid>
</UserControl>
